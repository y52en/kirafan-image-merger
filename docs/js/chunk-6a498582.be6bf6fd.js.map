{"version":3,"sources":["webpack:///./src/views/trim/index.vue?a7ee","webpack:///./src/views/trim/index.vue?cca5","webpack:///src/views/trim/index.vue","webpack:///./src/views/trim/index.vue?4fab","webpack:///./src/views/trim/index.vue?290e"],"names":["render","_vm","this","_h","$createElement","_c","_self","on","$event","$window","document","getElementById","click","_v","staticStyle","attrs","model","value","callback","$$v","isPrefab","expression","staticClass","downloadImg","staticRenderFns","extend","data","computed","elm","img","methods","img_elm","url","Promise","resolve","reject","onload","onerror","e","src","canvas","width","height","getContext","coordinate_x","coordinate_y","icon_w","ctx","canvasInit","drawImage","fillStyle","globalAlpha","fillRect","globalCompositeOperation","x","y","beginPath","start_x","start_y","len","lineTo","arc","Math","PI","closePath","fill","blob","toBlob","fileName","Number","Date","fileDownload_fromBlob","URL","createObjectURL","link","createElement","href","download","revokeObjectURL","CanvasElement","addEventListener","file_reader","FileReader","async","ImgOnload","target","result","main","readAsDataURL","files","watch","component","VBtn","VCheckbox","VIcon"],"mappings":"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","file":"js/chunk-6a498582.be6bf6fd.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=a399acaa&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',[_c('v-btn',{on:{\"click\":function($event){_vm.$window.document.getElementById('imgFile').click()}}},[_c('v-icon',[_vm._v(\"mdi-image\")]),_c('span',[_vm._v(\"読み込み\")]),_c('input',{staticStyle:{\"visibility\":\"visible\",\"width\":\"0\",\"height\":\"0\"},attrs:{\"id\":\"imgFile\",\"type\":\"file\"}})],1),_c('br'),_c('v-checkbox',{attrs:{\"label\":\"施設\"},model:{value:(_vm.isPrefab),callback:function ($$v) {_vm.isPrefab=$$v},expression:\"isPrefab\"}}),_c('img',{staticClass:\"d\",attrs:{\"id\":\"o\"}}),_c('canvas',{attrs:{\"id\":\"o2\"}}),_c('br'),_c('v-btn',{on:{\"click\":function($event){return _vm.downloadImg()}}},[_vm._v(\"画像をダウンロード\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\nspan\n  v-btn(@click=\"$window.document.getElementById('imgFile').click()\")\n    v-icon mdi-image\n    span 読み込み\n    input#imgFile(\n      type=\"file\",\n      style=\"visibility: visible; width: 0; height: 0\"\n    )\n  |<br>\n  v-checkbox(label=\"施設\", v-model=\"isPrefab\")\n  img#o.d\n  canvas#o2 \n  |<br>\n  v-btn(@click=\"downloadImg()\") 画像をダウンロード\n</template>\n\n<style scoped>\n.d {\n  display: none;\n}\n</style>\n\n<script lang=\"ts\">\nimport Vue from \"vue\";\nexport default Vue.extend({\n  data: () => ({\n    // a: 0,\n    isPrefab: true,\n  }),\n  computed: {\n    elm: () => ({\n      img: document.getElementById(\"o\"),\n    }),\n  },\n\n  methods: {\n    ImgOnload(img_elm, url) {\n      return new Promise((resolve, reject) => {\n        const img = img_elm;\n        img.onload = resolve;\n        img.onerror = (e) => reject(e);\n        img.src = url;\n      });\n    },\n    canvasInit(canvas, img) {\n      canvas.width = img.width;\n      canvas.height = img.height;\n      return canvas.getContext(\"2d\");\n    },\n    main() {\n      let coordinate_x, coordinate_y, icon_w;\n      if (this.isPrefab) {\n        coordinate_x = 211;\n        coordinate_y = 274;\n        icon_w = 192;\n      } else {\n        coordinate_x = 285;\n        coordinate_y = 319;\n        icon_w = 123;\n      }\n\n      const canvas = document.getElementById(\"o2\");\n      const ctx = this.canvasInit(canvas, { width: icon_w, height: icon_w });\n      //   ctx.drawImage(this.elm.img, 0, 0);\n\n      ctx.drawImage(\n        this.elm.img,\n        coordinate_x,\n        coordinate_y,\n        icon_w,\n        icon_w,\n        0,\n        0,\n        icon_w,\n        icon_w\n      );\n      ctx.fillStyle = \"#00FFFF\";\n      ctx.globalAlpha = 0.5;\n      ctx.fillRect(285, 319, 123, 123);\n      ctx.globalAlpha = 1;\n\n      ctx.globalCompositeOperation = \"destination-out\";\n      ctx.fillStyle = \"rgba(0,0,0,1)\";\n\n      for (let x = 0; x <= 1; x++) {\n        for (let y = 0; y <= 1; y++) {\n          ctx.beginPath();\n          const start_x = icon_w * x;\n          const start_y = icon_w * y;\n          const len = this.isPrefab ? 9 : 6;\n\n          ctx.lineTo(start_x, start_y);\n          ctx.arc(\n            start_x + len * (1 - 2 * x),\n            start_y + len * (1 - 2 * y),\n            len,\n            (1 - x) * Math.PI,\n            (1.5 - y) * Math.PI,\n            x ^ y\n          );\n          ctx.closePath();\n          ctx.fill();\n        }\n      }\n    },\n    async downloadImg() {\n      const canvas = document.getElementById(\"o2\");\n      const blob = await this.toBlob(canvas);\n      const fileName =\n        \"merged_\" +  Number(new Date());\n      this.fileDownload_fromBlob(blob, fileName);\n    },\n    fileDownload_fromBlob(blob, fileName = \"img.png\") {\n      const url = URL.createObjectURL(blob);\n      const link = document.createElement(\"a\");\n      link.href = url;\n      link.download = fileName;\n      link.click();\n      URL.revokeObjectURL(url);\n    },\n    toBlob(CanvasElement) {\n      return new Promise((resolve, reject) => {\n        try {\n          CanvasElement.toBlob(resolve);\n        } catch (e) {\n          reject(e);\n        }\n      });\n    },\n  },\n\n  async mounted() {\n    // if (location.hostname === \"localhost\") {\n    //   window.v = this;\n    //   window.p = process;\n    //   // this.loadImg();\n    // }\n\n    document.getElementById(\"imgFile\").addEventListener(\"change\", (e) => {\n      const file_reader = new FileReader();\n      file_reader.addEventListener(\"load\", async (e) => {\n        await this.ImgOnload(this.elm.img, e.target.result);\n        this.main();\n        this.downloadImg();\n      });\n      file_reader.readAsDataURL(e.target.files[0]);\n    });\n\n    // await this.ImgOnload(this.elm.img, require(\"../../debug/s.jpg\"));\n    // await this.ImgOnload(this.elm.img, require(\"../../debug/item.jpg\"));\n    // this.main();\n  },\n  watch:{\n      isPrefab(){\n          this.main()\n      }\n  }\n});\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=a399acaa&scoped=true&lang=pug&\"\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=a399acaa&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a399acaa\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCheckbox } from 'vuetify/lib/components/VCheckbox';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\ninstallComponents(component, {VBtn,VCheckbox,VIcon})\n"],"sourceRoot":""}